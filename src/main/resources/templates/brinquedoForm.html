<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title th:text="${isEdicao} ? 'Editar Brinquedo' : 'Novo Brinquedo'">Formulário Brinquedo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
			font-family: 'Poppins', sans-serif;
		}
		
        main {
			margin-top: 90px;
			padding: 20px;
			max-width: 700px;
		}
		
        .form-box {
			border: 1px solid #ccc;
			padding: 20px;
			border-radius: 10px;
			background: #fafafa;
		}
		
        .img-preview {
			margin-top: 10px;
			max-width: 150px;
			border-radius: 8px;
		}
		
		.footer-navbar {
			padding-top: 2cm;
			font-size: 0.8rem;
			height: 32px;
		}
    </style>
</head>
<body>

<div th:replace="~{navbar :: navbar}"></div>

<main class="container">
    <h1 class="mb-4" th:text="${isEdicao} ? 'Editar Brinquedo' : 'Novo Brinquedo'"></h1>

    <div class="form-box">
        <form th:object="${brinquedoDTO}" method="post" enctype="multipart/form-data"
              th:action="${isEdicao} ? @{/admin/brinquedos/atualizar-brinquedo/{id}(id=${brinquedoDTO.id})} : @{/admin/brinquedos/salvar-brinquedo}">

            <!-- Hidden ID -->
            <input type="hidden" th:field="*{id}" />

            <div class="mb-3">
                <label class="form-label">Nome:</label>
                <input type="text" th:field="*{nome}" class="form-control" required />
            </div>

            <div class="mb-3">
                <label class="form-label">Marca:</label>
                <input type="text" th:field="*{marca}" class="form-control" required />
            </div>

            <div class="mb-3">
                <label class="form-label">Categoria:</label>
                <select th:field="*{categoria.id}" class="form-select" required>
                    <option th:each="c : ${listaDeCategorias}" th:value="${c.id}" th:text="${c.nome}"
                            th:selected="${c.id} == ${brinquedoDTO.categoria.id}">
					</option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Descrição:</label>
                <textarea th:field="*{descricao}" class="form-control" rows="3" required></textarea>
            </div>

            <div class="mb-3">
                <label class="form-label">Idade Ideal:</label>
                <input type="text" th:field="*{idadeIdeal}" class="form-control" required />
            </div>

            <div class="mb-3">
                <label class="form-label">Imagem:</label>
                <input type="file" name="file" class="form-control" th:required="${!isEdicao}"/>
                <div th:if="${brinquedoDTO.imagemPrincipal != null}" class="mt-2">
                    <img th:src="@{${brinquedoDTO.imagemPrincipal}}" class="img-preview"/>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Preço:</label>
                <input type="number" th:field="*{preco}" class="form-control" min="0" step="0.01" required />
            </div>

            <div class="form-check mb-3">
                <input type="checkbox" th:field="*{destaque}" class="form-check-input" id="destaqueCheck"/>
                <label class="form-check-label" for="destaqueCheck">Destaque</label>
            </div>

            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary" th:text="${isEdicao} ? 'Atualizar' : 'Salvar'">Salvar</button>
                <a th:href="@{/admin/brinquedos}" class="btn btn-secondary">Cancelar</a>
            </div>

        </form>
    </div>
</main>

<footer class="navbar navbar-expand-sm fixed-bottom footer-navbar">
    <div class="container-fluid" style="background-color: rgb(224, 224, 239);">
        <span class="navbar-text mx-auto">&copy; 2025 Cat Brinquedos. Todos os direitos reservados.</span>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
